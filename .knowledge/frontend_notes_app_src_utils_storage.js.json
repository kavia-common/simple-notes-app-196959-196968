{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for storing and retrieving notes data in local storage, including versioning and migration helpers.", "external_files": ["window.localStorage"], "external_methods": ["window.localStorage.getItem", "window.localStorage.setItem"], "published": ["loadNotesState", "saveNotesState", "getStorageKey"], "classes": [], "methods": [{"name": "safeJsonParse(raw)", "description": "Parses a raw JSON string safely, returning null on failure.", "scope": "", "scopeKind": ""}, {"name": "migrateEnvelope(envelope)", "description": "Handles migration and validation of stored data envelopes, ensuring they conform to the current schema.", "scope": "", "scopeKind": ""}, {"name": "loadNotesState()", "description": "Loads notes data from local storage, with automatic migration if needed.", "scope": "", "scopeKind": ""}, {"name": "saveNotesState(state)", "description": "Saves current notes data into local storage with versioning.", "scope": "", "scopeKind": ""}, {"name": "getStorageKey()", "description": "Returns the constant key used for local storage.", "scope": "", "scopeKind": ""}], "calls": ["window.localStorage.getItem", "window.localStorage.setItem", "JSON.parse", "JSON.stringify"], "search-terms": ["localStorage", "notes", "storage", "migration", "versioning", "storage utils", "storage.js"], "state": 2, "file_id": 13, "knowledge_revision": 42, "git_revision": "f63efd97b176fd1511ba30ccbdf0f63caff79543", "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^const STORAGE_KEY = \"notes.v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^  const envelope = { version: 1, data: state };$/", "language": "JavaScript", "kind": "property", "scope": "saveNotesState.envelope", "scopeKind": "class"}, {"_type": "tag", "name": "envelope", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^  const envelope = { version: 1, data: state };$/", "language": "JavaScript", "kind": "class", "scope": "saveNotesState", "scopeKind": "class"}, {"_type": "tag", "name": "getStorageKey", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^export function getStorageKey() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadNotesState", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^export function loadNotesState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "migrateEnvelope", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^function migrateEnvelope(envelope) {$/", "language": "JavaScript", "kind": "function", "signature": "(envelope)"}, {"_type": "tag", "name": "safeJsonParse", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^function safeJsonParse(raw) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw)"}, {"_type": "tag", "name": "saveNotesState", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^export function saveNotesState(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "version", "path": "/home/kavia/workspace/code-generation/simple-notes-app-196959-196968/frontend_notes_app/src/utils/storage.js", "pattern": "/^  const envelope = { version: 1, data: state };$/", "language": "JavaScript", "kind": "property", "scope": "saveNotesState.envelope", "scopeKind": "class"}], "hash": "10092e9c2255534fb329e077512ff2a0", "format-version": 4, "code-base-name": "frontend_notes_app", "filename": "frontend_notes_app/src/utils/storage.js", "fields": [{"name": "const envelope = { version: 1, data: state };", "scope": "saveNotesState.envelope", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"42": "f63efd97b176fd1511ba30ccbdf0f63caff79543"}]}